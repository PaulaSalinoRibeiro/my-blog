---
slug: "como-os-navegadores-funcionam-por-debaixo-dos-panos"
title: "Como os navegadores funcionam por debaixo dos panos"
date: "20 de Mar√ßo de 2024"
subtitle: "Entender como os navegadores funcionam √© crucial pra quem trabalha ou pretende trabalhar com desenvolvimento web."
tags:
  - navegadores
  - frontend
  - navega√ß√£o
  - fetch
  - renderiza√ß√£o
---

<br/>

Atualmente os principais navegadores s√£o o Google Chrome, Mozilla Firefox, Microsoft Edge e Apple Safari, provavelmente voc√™ est√° usando um deles para acessar essa p√°gina. Cada navegador possui suas caracteristicas e recursos, nesse post irei explorar os processos de "**navega√ß√£o**‚Äù, "**fetch de dados**‚Äù e "**rederiza√ß√£o da p√°gina**‚Äù.
<br/>
Para o navegador exibir uma p√°gina na tela do nosso computador, ele precisa ter acesso aos recursos dessa p√°gina (HTML, CSS, JavaScript, imagens, videos, etc‚Ä¶) que est√£o armazenados em algum lugar e √© atrav√©s da navega√ß√£o que localizamos esses recursos.

<br/>
<br/>
<br/>

## 1. A Navega√ß√£o ‚õµÔ∏è 

<br/>
<br/>

Cada computador possui um identificador √∫nico chamado IP (Internet Protocol), ao informamos ao navegador que queremos acessar a p√°gina ‚Äúhttps://exemplo.com‚Äù, ele transforma o nome de dom√≠nio em um endere√ßo de IP ‚Äú192.7.2.34‚Äù, agora conhecendo o IP √© possivel localizar o computador que armazena os recursos da p√°gina que queremos acessar.
A convers√£o entre o nome de dom√≠nio para o endere√ßo de IP √© realizada atrav√©s de consulta ao servidor DNS (Domain Name System). O DNS √© muito semelhante a uma lista telefonica que associa um nome a um n√∫mero de telefone. 
<br/>
Essa requisi√ß√£o ao servidor DNS ocorre quando acessamos uma p√°gina pela primeira vez, depois disso o IP fica armazenado, e numa pr√≥xima vez que for visitar a p√°gina o acesso ser√° mais r√°pido.
<br/>
<br/>
Localizado o computador com os recursos da nossa p√°gina o navegador precisa abrir uma conex√£o atrav√©s do protocolo TCP (Transmission Control Protocol). O TCP √© um padr√£o de comunica√ß√£o que permite a troca de dados atrav√©s da internet, assegurando que os dados sejam entregues na ordem e no destino correto. 
<br/>
A conex√£o √© criada a partir de tr√™s vias ou handshake: 
<br/>
<br/>
1. o navegador envia um pacote SYN solicitando uma sincroniza√ß√£o.
<br/>
2. o servidor responde com um pacote SYN-ACK concordando com o processo.
<br/>
3. por fim o navegador envia o pacote ACK estabelecendo a conex√£o.
<br/>
<br/>
Para estabelecer uma conex√£o segura para a transmiss√£o dos dados, uma outra camada com um protocolo TSL (Transport Security Layer) √© aplicado. O TSL √© um protocolo que aplica uma criptografia aos dados.
<br/>
O protocolo TSL consiste nas seguintes etapas:
<br/>
<br/>
1. o navegador envia uma solicita√ß√£o de seguran√ßa ao servidor.
<br/>
2. o servidor responde a solicita√ß√£o de seguran√ßa e envia o certificado SSL ao navegador.
<br/>
3. o navegador verifica a autenticidade do certificado SSL e envia para o servidor qual o algoritmos de criptografia e os m√©todos de autentica√ß√£o que ser√£o usados.
<br/>
4. por fim √© estabelecido uma conex√£o segura.
<br/>
<br/>
Agora que temos uma conex√£o segura, o navegador ir√° pegar os recursos necess√°rios para montar a p√°gina dando inicio o pr√≥ximo passo o fetch dos dados.
<br/>

<br/>
<br/>

## 2. O Fetch dos dados üêï

<br/>
<br/>

Para buscar os recursos da p√°gina o navegador envia uma requisi√ß√£o HTTP/GET solicitando inicialmente o HTML da p√°gina. O HTTP (Hypertext Transfer Protocol) √© um protocolo de comunica√ß√£o baseado no modelo cliente-servidor (entenda que o cliente √© o navegador). Esse modelo consiste em solicita√ß√µes enviadas pelo navegador para obter um recurso, e em contra partida, o servidor responde a solicita√ß√£o enviando para o navegador o recurso pedido, caso ele exista.
<br/>
Toda solicita√ß√£o ou requisi√ß√£o HTTP consiste de um cabe√ßalho (header) e opcionalmente um corpo (body), no cabe√ßalho cont√©m uma s√©rie de informa√ß√µes, mas as principais s√£o o m√©todo HTTP (GET, POST, PUT, DELTE, etc‚Ä¶) e a URI (Uniform Resource Identifier) que indica qual o recurso o nevagador est√° buscando.
<br/>
<br/>
O servidor ao receber a solicita√ß√£o enviada pelo navegador ir√° processar a informa√ß√£o e enviar uma resposta HTTP ao navegador. Essa resposta tamb√©m consiste de um cabe√ßalho contendo v√°rias informa√ß√µes, sendo a principal o status code (200 OK, 404 Not Found, etc‚Ä¶) que nos informa se o processamento ocorreu com sucesso ou se houve alguma falha. 
<br/>
<br/>
üëâüèª¬†Caso queira ver isso acontecendo basta inspecionar a p√°gina e ir na aba "network‚Äù ou "rede‚Äù e navegar para uma p√°gina qualquer.
<br/>
<br/>
O tempo em que a solicita√ß√£o √© disparada pelo navegador at√© o recebimento dos primeiros pacotes de dados √© conhecido por <span>Time to First Byte</span> (TTFB).
<br/>
<br/>
A velocidade de trasmiss√£o desses pacotes de recursos (conhecidos como <span>chunks</span>) √© controlado por um <span>algoritimo de cogestionamento</span> que tem como objetivo manter uma estabilidade no fluxo de chunks enviados.
<br/>
Depois que cada chunk √© recebido pelo navegador uma mensagem ACK √© enviada para o servidor, como a conex√£o entre navegador e servidor √© limitada, caso o servidor dispare muitos pacotes de chunks rapidamente eles ser√£o perdidos e o navagador n√£o ir√° retornar nenhuma messagem ACK e √© aqui que o algoritimo de congestionamento entra em a√ß√£o monitorando esse fluxo de pacotes de chunks e mensagens ACK, afim de, encontrar uma taxa de transmiss√£o ideal criando um fluxo constante.
<br/>
<br/>
At√© agora vimos como o navegador realiza o processo de navega√ß√£o e fetch dos recursos, chegou a hora de iniciar o √∫ltimo passo a rederiza√ß√£o da p√°gina.

<br/>