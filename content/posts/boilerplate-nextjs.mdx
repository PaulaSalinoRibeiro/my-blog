---
slug: "boilerplate-nextjs"
title: "Criando um boilerplate frontend do zero!"
date: "12 de Maio de 2023"
subtitle: "Nesse tutorial irei te guiar na cria√ß√£o de um boilerplate utilizando Next.js, TypeScript, ESLint, Jest, Husky, Lint-Staged e Tailwind Css."
tags:
  - nextjs
  - frontend
  - javascript
  - typescript
---

<br/>

Antes de come√ßarmos vamos entender primerio o conceito de um boilerplate, que consiste um modelo inicial de 
arquivos de c√≥digo pr√© configurados que serve como ponto de partida na cria√ß√£o de projetos, nesse artigo irei 
criar um boilerplate do completo zero de um projeto frontend utilizando Next.js, TypeScript, ESLint, 
Jest, Husky, Lint-Staged e Tailwind CSS.

<br/>

Aqui vamos utilizar o Next.js por ser um framework do React que possui integra√ß√£o com TypeScript, permite trabalhar 
com rederiza√ß√£o do lado do servidor e seu sistema de roteamento permite criar rotas de forma din√¢mica e flex√≠vel, 
al√©m disso, o Next.js possui suporte a diversas fontes de dados.

<br/>

E por que √© importante realizar a configura√ß√£o de um projeto? 

<br/>

Porque a configura√ß√£o √© essencial para garantir que o desenvolvimento do projeto ocorra de forma 
organizada  e eficiente, al√©m de ser possivel automatizar algumas tarefas repetitivas, realizar a padroniza√ß√£o de 
c√≥digo e ainda fornecer uma estrutura adequada, afim de, garantir escalabilidade.

<br/>

# 1. Iniciando o projeto

<br/>

Podemos iniciar o projeto criando um diret√≥rio e instalando as biliotecas necess√°rias.

<br/>

```bash

mkdir boilerplate_nextjs && cd boilerplate_nextjs

npm init -y

npm install next react react-dom

```

<br/>

Ap√≥s a instala√ß√£o podemos adicionar os scripts no <span>package.json</span>

<br/>

```json

"scripts": {
	"dev": "next dev", // modo de desenvolvimento
    "build": "next build", // modo de produ√ß√£o
    "start": "next start" // iniciar o servidor no modo de produ√ß√£o
  },

```

<br/>

Por fim, criamos dois diret√≥rios na raiz do projeto <span>public</span> e <span>src</span>. Dentro do diret√≥rio 
src criamos um novo diret√≥rio <span>pages</span> com o arquivo <span>index.js</span> com o trecho de c√≥digo a seguir:

<br/>

```jsx

export default function Home() {
	return <h1>Hello world!</h1>
}

```

<br/>

Ao executar o comando <span>npm run dev</span> no terminal, o servidor √© iniciando no modo de desenvolvimento e 
automaticamente √© gerado o diret√≥rio <span>.next</span> na raiz do projeto.

<br/>

![Diret√≥rios criados ap√≥s rodar o comando npm run dev](/images/bolierplate-nextjs/directories.png)

<br/>

Em resumo, o diret√≥rio <span>.next</span> √© um diret√≥rio oculto gerado automaticamente pelo Next.js durante o 
processo de constru√ß√£o de um projeto, nele cont√©m os arquivos necess√°rios para a renderiza√ß√£o do aplicativo em 
produ√ß√£o.

<br/>

# 2. Adicionando TypeScript

<br/>

O TypeScript √© um superset JavaScript com ele temos acesso a recursos adicionais que permite desenvolvermos 
aplica√ß√µes escal√°veis, ou seja, ele permite identificarmos erros de compila√ß√£o ainda em tempo de execu√ß√£o, al√©m de, 
contribuir para uma maior legibilidade de c√≥digo facilitando a manute√ß√£o.

<br/>

Para adicionar o typescript basta criar na raiz do projeto o arquivo <span>tsconfig.json</span> e executar o 
comando <span>npm run dev</span>

<br/>

```shell

touch tsconfig.json

npm run dev

```

<br/>

Com isso os pacotes typescript, <span>@types/react, @types/node</span> ser√£o instalados como dependencias de 
desenvolvimento no <span>package.json</span>.

<br/>

```json

"devDependencies": {
    "@types/node": "18.15.13",
    "@types/react": "18.0.37",
    "typescript": "5.0.4"
  }

```

<br/>

E o arquivo <span> tsconfig.json </span>  passa a ter a seguinte configura√ß√£o.

<br/>

```ts

{
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true, // por padr√£o inicia como falso
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "incremental": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve"
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx"
  ],
  "exclude": [
    "node_modules"
  ]
}

```

<br/>

E tamb√©m √© criado na raiz do projeto um arquivo <span>next.env.d.ts</span> com a configura√ß√£o

<br/>

```ts

/// <reference types="next" />
/// <reference types="next/image-types/global" />

```

<br/>

Agora basta renomear o arquivo <span>index.js</span> para <span>index.tsx</span>

<br/>

üí°¬†Dica: Caso o TypeScript n√£o mostre os erros, adicione o diret√≥rio <span>.vscode</span> com o 
arquivo <span>settings.json</span> a configura√ß√£o.

<br/>

```json

{
  "typescript.validate.enable": true,
}

```

<br/>

Ou tente reiniciar o vscode ou o computador.

<br/>

# 3. Adicionando ESLint

<br/>

O ESLint √© uma ferramenta de analize est√°tica de c√≥digo, essa biblioteca ser√° respons√°vel por detectar e 
corrigir erros comuns de c√≥digo, al√©m de padronizar o estilo de codifica√ß√£o. Com isso garantimos a qualidade e 
consist√™ncia do c√≥digo tornando mais f√°cil de ser compreendido. 

<br/>

Para adicionar o ESLint basta executar o comando <span>npm init @eslint/config</span> no terminal.

<br/>

E em seguinda responder as perguntas para configurar o arquivo <span>eslintrc.json</span>

<br/>

```shell

Need to install the following packages:
@eslint/create-config
Ok to proceed? (y) y

? How would you like to use ESLint? ‚Ä¶ 
  To check syntax only
  To check syntax and find problems
‚ùØ To check syntax, find problems, and enforce code style

? What type of modules does your project use? ‚Ä¶ 
‚ùØ JavaScript modules (import/export)
  CommonJS (require/exports)
  None of these

? Which framework does your project use? ‚Ä¶ 
‚ùØ React
  Vue.js
  None of these

Does your project use TypeScript? ‚Ä∫ No / Yes

? Where does your code run? ‚Ä¶  (Press <space> to select, <a> to toggle all, <i> to invert selection)
‚úî Browser
‚úî Node

? How would you like to define a style for your project? ‚Ä¶ 
‚ùØ Use a popular style guide
  Answer questions about your style

? Which style guide do you want to follow? ‚Ä¶ 
‚ùØ Standard: https://github.com/standard/eslint-config-standard-with-typescript
  XO: https://github.com/xojs/eslint-config-xo-typescript

? What format do you want your config file to be in? ‚Ä¶ 
‚ùØ JavaScript
  YAML
  JSON

Checking peerDependencies of eslint-config-standard-with-typescript@latest
Local ESLint installation not found.
The config that you ve selected requires the following dependencies:

eslint-plugin-react@latest eslint-config-standard-with-typescript@latest @typescript-eslint/eslint-plugin@^5.43.0 eslint@^8.0.1 eslint-plugin-import@^2.25.2 eslint-plugin-n@^15.0.0 eslint-plugin-promise@^6.0.0 typescript@*
? Would you like to install them now? ‚Ä∫ No / Yes

? Which package manager do you want to use? ‚Ä¶ 
‚ùØ npm
  yarn
  pnpm

```

<br/>

Ap√≥s concluir essa etapa o arquivo <span>eslintrc.json</span> √© criado automaticamente na raiz do projeto com a 
configura√ß√£o a seguir:

<br/>

```json

{
    "env": {
        "browser": true,
        "es2021": true
    },
    "extends": [
        "plugin:react/recommended",
        "standard-with-typescript"
    ],
    "overrides": [
    ],
    "parserOptions": {
        "ecmaVersion": "latest",
        "sourceType": "module"
    },
    "plugins": [
        "react"
    ],
    "rules": {
    }
}

```

<br/>

‚ö†Ô∏è¬†Aten√ß√£o: Por estarmos utilizando o typescript √© necess√°rio adicionar dois pacotes 
<span>plugin:@typescript-eslint</span> e <span>@typescript-eslint/parser</span>

<br/>

```bash

  npm install -D plugin:@typescript-eslint @typescript-eslint/parser

```

<br/>

Agora precisamos modificar o arquivo <span>.eslintrc.json</span> e adicionar esse pacotes.

<br/>

```json

{
    "env": {
        "browser": true,
        "es2021": true
    },
    "extends": [
        "plugin:@typescript-eslint/recommended",
        "plugin:react/recommended",
        "standard-with-typescript",
        "plugin:storybook/recommended"
    ],
    "overrides": [],
    "parse": "@typescript-eslint/parser",
    "parserOptions": {
        "ecmaVersion": "latest",       
        "sourceType": "module"
    },
    "plugins": [
        "react", "@typescript-eslint" 
    ],
    "rules": {
      
    }
}

```

<br/>

E podemos adicionar aos scripts o comando

<br/>

```json

"scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "npx eslint src/**/*.tsx --fix" 
  },

```

<br/>

A flag <span>--fix</span> serve para corrigir automaticamente os erros.

<br/>

‚ö†Ô∏è¬†Aten√ß√£o: Nem todos os erros o ESLint ser√° capaz de corrigir sozinho.

<br/>

Agora ao executar o comando <span>npm run lint</span> o ESLint come√ßa a acusar os erros

<br/>

![ESLint detectando erros](/images/bolierplate-nextjs/erro-lint.png)

<br/>

Caso alguma regra n√£o fa√ßa sentido √© possivel desabilitar no arquivo <span>eslintrc.json</span>

<br/>

```json

"rules": {
        // remove a obrigat√≥riedade de importar React na primeira linha
        "react/react-in-jsx-scope": "off",
    }

```

<br/>

üí°¬†Dica:  Existem duas extens√µes no vscode que ajuda a identificar os erros de lint sem a necessidade de 
executar o comando no terminal, s√£o elas ESLint criada pela Microsoft e a Error Lens.

<br/>

![ESLint pluggings](/images/bolierplate-nextjs/eslint.png)

<br/>

![Erro lens pluggings](/images/bolierplate-nextjs/erro-lens.png)

<br/>

# 4. Adicionando Jest

<br/>

Escrever testes √© extremamente importante para garantir que a aplica√ß√£o funcione corretamente e se torne 
escal√°vel, aqui irei adicionar o Jest para ser a ferramenta de teste do boilerplate.

<br/>

E para instalar o Jest e configura-lo precisamos instalar alguns pacotes como mostra a seguir:

<br/>

```shell

npm install -D jest @types/jest @testing-library/react @testing-library/jest-dom jest-environment-jsdom

```

<br/>

√â possivel utilizar o comando <span>jest --init</span> para criar o arquivo de configura√ß√£o automaticamente, por√©m, 
irei criar manualmente apenas com as cofigura√ß√µes necess√°rias.

<br/>

Para isso, basta criar na raiz do projeto o arquivo <span>jest.config.js</span> e passar a seguinte configura√ß√£o:

<br/>

```js

module.exports = {
  testPathIgnorePatterns: ['/node_modules/', '/.next/'], // dizemos para ignorar esses diret√≥rios ao executar os testes
  testEnvironment: 'jsdom', // utiliza o jsdom como ambiente de teste
  testEnvironmentOptions: {
    customExportConditions: ['react', 'next']
  },
  setupFilesAfterEnv: ['<rootDir>/.jest/setup.ts'], // antes de executar os teste utiliza este arquivo
  modulePaths: ['<rootDir>/src/']
}

```

<br/>


Precisamos adicionar a raiz do projeto o diret√≥rio <span>.jest</span> contendo o arquivo <span>setup.ts</span> 
com os importes

<br/>

```ts

import '@testing-library/react'
import '@testing-library/jest-dom'

```

<br/>

Com isso, n√£o ser√° necess√°rio fazer a importa√ß√£o dessas bibliotecas nos arquivos de teste.

<br/>

Para finalizar nossa configurac√£o precisamos adicionar na raiz do projeto o arquivo <span>babel.config.js</span>  
a configura√ß√£o a seguir:

<br/>

```js

module.exports = {
  presets: [
    '@babel/preset-typescript', // informamos que estamos utilizando typescript
    'next/babel' // informamos que estamos utilizando o next
  ]
}

```

<br/>

Com o preset <span>@babel/preset-typescript</span> adicionado nas cofigura√ß√µes √© necess√°rio fazer sua instala√ß√£o e 
tamb√©m adicionar o comando de testes aos scripts.

<br/>

```js

"scripts": {
    "test": "jest",
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "npx eslint src/**/*.tsx --fix"
  },

```

<br/>

# 5. Adicionando Husky e Lint-staged

<br/>

Essas ferramentas ser√£o utilizadas para automatizar algumas taferas de pr√©-commit, de forma a garantir 
que o c√≥digo enviado para o reposit√≥rio n√£o tenha erros de lint e nem testes quebrados com as altera√ß√µes feitas.

<br/>

Antes de configurar essas ferramentas precisamos inicializar o git com o comando <span>git init</span>. 

<br/>

Agora podemos instalar as bibliotecas  <span>husky</span> e o <span>lint-staged</span>.

<br/>

```shell

npm install -D husky lint-staged

```

<br/>

Em seguida adicionamos aos scripts o comando <span>"prepare": "husky install"</span> e 
executamos no terminal <span>npm run prepare</span>. Com isso ser√° criado automaticamente o 
diret√≥rio <span>.husky</span> na raiz do projeto como mostra a imagem a seguir:

<br/>

![Diret√≥rio husky](/images/bolierplate-nextjs/husky.png)

<br/>

Para configura o lint-staged precisamos adicionar ao <span>package.json</span> a 
chave <span>"lint-staged"</span> com os scripts que queremos executar antes de cada 
commit, conforme o exemplo a seguir:

<br/>

```json

 "lint-staged": {
    "src/**/*{ts,tsx}": "npm run lint", // verifica erros de lint
    "src/test/**/*": "npm test --findRelatedTests --bail" // executa os testes
  },

```

<br/>

As flags <span>--findRelatedTests</span> e <span>--bail</span> servem respectivamente para executar 
apenas os teste nos arquivos que forma modificados e interromper a execu√ß√£o dos 
testes assim que um falhar.

<br/>

Agora podemos adicionar o arquivo <span>pre-commit</span> dentro do diret√≥rio 
<span>.husky</span> com o seguinte c√≥digo:

<br/>

```sh

#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run lint-staged

```

<br/> 

Por fim, adicionamos o comando <span>"lint-staged": "lint-staged"</span> aos scripts.

<br/>

Agora ao fazer um commit os scripts de teste e lint ser√£o executados automaticamentes 
nos arquivos em staged e caso exista algum erro de lint ou teste n√£o ser√° possivel 
realizar o commit.

<br/>

![Lint-staged e Husky rodando com um commit](/images/bolierplate-nextjs/husky-lint-staged.png)

<br/>

‚ö†Ô∏è¬†Aten√ß√£o: Caso encontre o seguinte erro no terminal, basta executar o comando 
<span>chmod ug+x .husky/*</span>

```shell

hint: The '.husky/pre-commit' hook was ignored because it s not set as executable.
hint: You can disable this warning with `git config advice.ignoredHook false`.

```

<br/>

# 6. Adicionando Tailwind CSS

<br/>

O Tailwind CSS √© um framework de estiliza√ß√£o que permite criar interfaces 
responsivas de forma muito facil.

<br/>

Para adicionar o Tailwind CSS ao boilerplate precisamos instalar os pacotes.

<br/>

```shell

npm install tailwindcss postcss autoprefixer

```

<br/>

E executar o comando <span>npx tailwindcss init -p</span>  no terminal. Automaticamente ser√£o criados os 
arquivos <span>postcss.config.js</span> e <span>tailwind.config.js</span> na raiz do projeto com a configura√ß√£o

<br/>

```js

/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/**/*.{js,ts,jsx,tsx,mdx}' // adicionar o caminho do arquivo
  ],
  theme: {
    extend: {}
  },
  plugins: []
}

```

<br/>

Adicionamos o diret√≥rio <span>styles</span> contendo o arquivo <span>global.css</span> com as diretivas do 
Tailwind CSS.

<br/>

```css

@tailwind base;
@tailwind components;
@tailwind utilities;

```

<br/>

Para utilizarmos as classes do Tailwind precisamos adicionar o arquivo <span>_app.tsx</span> 
dentro do diret√≥rio <span>pages</span> e realizar a importa√ß√£o do arquivo <span>globa.css</span>.

<br/>

```jsx

import { type AppProps } from 'next/app'
import '../styles/globals.css'

export default function App ({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}

```